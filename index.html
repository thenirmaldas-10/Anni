<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hello Deveee üíñ</title>
<style>
  * { box-sizing: border-box; }
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg,#ffe6f0,#e6ccff);
    color: #d63384;
    text-align: center;
    overflow-x: hidden;
  }

  section {
    display: none;
    min-height: 100vh;
    width: 100%;
    padding: 40px 20px;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  section.active { display: flex; animation: fadeIn .6s ease forwards; }
  @keyframes fadeIn { from {opacity:0; transform:translateY(10px)} to {opacity:1; transform:translateY(0)} }

  #start img { width:90%; max-width:400px; border-radius:20px; margin-top:40px; box-shadow:0 8px 20px rgba(0,0,0,.2); }
  h1 { margin-top:20px; }
  button {
    background:#ff66b2; color:white; border:none; border-radius:10px;
    padding:12px 28px; font-size:16px; margin:10px; cursor:pointer; transition:.25s;
  }
  button:hover { background:#ff3385; }

  input[type="date"] { padding:10px; border-radius:8px; border:2px solid #ff99cc; font-size:16px; }
  .mcq-horizontal {
    display:flex !important;
    justify-content:center;
    gap:14px;
    flex-wrap:wrap;
    margin-top:12px;
  }
  .mcq-horizontal .mcq-opt {
    display:flex;
    align-items:center;
    gap:8px;
    padding:8px 14px;
    border-radius:10px;
    border:2px solid #ff99cc;
    background: white;
    cursor:pointer;
    user-select:none;
  }
  .mcq-horizontal .mcq-opt input[type="radio"] { transform:scale(1.15); cursor:pointer; }
  #options { margin-top:18px; }

  .gift-boxes { display:flex; justify-content:center; gap:30px; margin-top:40px; flex-wrap:wrap; }
  .gift {
    width:100px; height:100px; background:pink; border:3px solid #ff66b2; border-radius:15px;
    position:relative; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:30px;
    transition: transform .25s, box-shadow .25s, opacity .25s;
  }
  .gift:hover { transform: translateY(-8px) rotate(4deg); box-shadow:0 8px 20px rgba(255,102,178,0.4); }
  .gift-number {
    position:absolute; top:6px; left:6px; font-size:16px; font-weight:700; color:white; background:#ff3385;
    border-radius:50%; width:26px; height:26px; display:flex; align-items:center; justify-content:center;
  }

  .photo-show { width:200px; height:200px; border-radius:20px; margin:10px; object-fit:cover;
    opacity:0; transform:scale(.6); animation: appear .9s forwards; }
  @keyframes appear { to { opacity:1; transform:scale(1) } }

  /* Final area stacking so hearts show above everything */
  #final { position:relative; z-index:1; padding-bottom:80px; }

  /* Floating hearts (fixed & topmost) */
  .floating-heart {
    position: fixed;
    bottom: -20px;
    font-size: 26px;
    pointer-events: none;
    z-index: 99999;
    animation-name: floatUp;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    will-change: transform, opacity;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-110vh) scale(1.4); opacity: 0; }
  }

  /* small responsive fix */
  @media (max-width:420px) {
    .mcq-horizontal .mcq-opt { padding:8px 10px; font-size:14px }
    .photo-show { width:140px; height:140px }
    .gift { width:84px; height:84px; font-size:24px }
  }
</style>
</head>
<body>

<!-- keep same file names as you said -->
<audio id="bg-music" autoplay loop>
  <source src="A_Thousand_Years.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<!-- Opening Page -->
<section id="start" class="active">
  <img src="her_photo.jpg" alt="Her Photo">
  <h1>Hello Deveee.. üíï</h1>
  <p style="max-width:700px;margin:8px auto 0;">Start the questionnaire and enjoy your surprise üíå</p>
  <button onclick="goToQuiz()">Start Questionnaire üíå</button>
</section>

<!-- Questionnaire Page -->
<section id="quiz">
  <h2 id="question"></h2>
  <div id="options" aria-live="polite"></div>
  <div style="height:10px;"></div>
  <button id="submitBtn" onclick="checkAnswer()">Submit</button>
  <p id="feedback" style="color:#b0003b;margin-top:12px;"></p>
</section>

<!-- Gifts Page -->
<section id="gifts">
  <h2>Are you ready for your surprise? üéÅ Click the boxes in order: 1 ‚Üí 2 ‚Üí 3</h2>
  <div class="gift-boxes">
    <div class="gift" id="gift1" onclick="openGift(1)"><div class="gift-number">1</div>üéÅ</div>
    <div class="gift" id="gift2" onclick="openGift(2)"><div class="gift-number">2</div>üéÅ</div>
    <div class="gift" id="gift3" onclick="openGift(3)"><div class="gift-number">3</div>üéÅ</div>
  </div>
  <p id="giftMessage" style="margin-top:18px;"></p>
</section>

<!-- Final Animation Page -->
<section id="final">
  <h1>üíû Happy Anniversary My Love üíû</h1>
  <div id="photoContainer" aria-live="polite"></div>
  <h2 style="margin-top:30px;">You are my forever, my reason to smile, my happiest dream come true. üíñ</h2>
</section>

<script>
/* -----------------------------
   Data & state
   ----------------------------- */
const questions = [
  { q: "When did you meet your boyfriend for the first time?", type: "date", correct: "2024-09-25" },
  { q: "Your boyfriend's date of birth?", type: "mcq", options: ["20/07/2000","21/07/2000","20/06/2001"], correct: "20/07/2000" },
  { q: "Have you kissed your boyfriend? If yes, from where was your first kiss?", type: "text" },
  { q: "Your best memory with your boyfriend?", type: "text" },
  { q: "What do you love most about him?", type: "text" },
  { q: "What name do you love to call him?", type: "text" }
];

let step = 0;
let expectedGift = 1;

/* -----------------------------
   Navigation helpers
   ----------------------------- */
function showSection(id) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  const sec = document.getElementById(id);
  sec.classList.add('active');
  window.scrollTo(0,0);
}

/* -----------------------------
   Quiz rendering
   ----------------------------- */
function goToQuiz(){
  showSection('quiz');
  loadQuestion();
}

function loadQuestion(){
  const q = questions[step];
  const optionsDiv = document.getElementById('options');
  const feedback = document.getElementById('feedback');
  feedback.textContent = '';
  optionsDiv.innerHTML = '';

  if(q.type === 'date'){
    optionsDiv.className = ''; // clear classes
    const input = document.createElement('input');
    input.type = 'date';
    input.id = 'dateAnswer';
    input.style.padding = '10px';
    input.style.borderRadius = '8px';
    input.style.border = '2px solid #ff99cc';
    optionsDiv.appendChild(input);

  } else if(q.type === 'mcq'){
    // force horizontal container
    optionsDiv.className = 'mcq-horizontal';
    // ensure unique radio group per question so selection resets correctly
    const name = 'mcq_' + step;
    // shuffle a copy
    const opts = [...q.options].sort(()=>Math.random()-0.5);
    opts.forEach((opt, idx) => {
      const wrap = document.createElement('label');
      wrap.className = 'mcq-opt';
      wrap.htmlFor = 'opt_'+idx;
      const radio = document.createElement('input');
      radio.type = 'radio';
      radio.name = name;
      radio.id = 'opt_'+idx;
      radio.value = opt;
      // clicking label toggles radio (native)
      const text = document.createElement('span');
      text.textContent = opt;
      wrap.appendChild(radio);
      wrap.appendChild(text);
      optionsDiv.appendChild(wrap);
    });

  } else {
    optionsDiv.className = '';
    const ta = document.createElement('input');
    ta.type = 'text';
    ta.id = 'textAnswer';
    ta.placeholder = 'Type your answer here...';
    ta.style.padding = '10px';
    ta.style.borderRadius = '8px';
    ta.style.border = '2px solid #ff99cc';
    ta.style.width = '80%';
    optionsDiv.appendChild(ta);
  }

  document.getElementById('question').innerText = q.q;
}

/* -----------------------------
   Validation & progression
   ----------------------------- */
function checkAnswer(){
  const q = questions[step];
  let userAns = '';
  if(q.type === 'date'){
    const el = document.getElementById('dateAnswer');
    if(!el || !el.value) { alert('Please select a date before moving ahead ‚ù§Ô∏è'); return; }
    userAns = el.value;
  } else if(q.type === 'mcq'){
    const checked = document.querySelector('input[name="mcq_'+step+'"]:checked');
    if(!checked){ alert('Please select an answer ‚ù§Ô∏è'); return; }
    userAns = checked.value;
  } else {
    const el = document.getElementById('textAnswer');
    if(!el || !el.value.trim()){ alert('Please type your answer ‚ù§Ô∏è'); return; }
    userAns = el.value.trim();
  }

  if(q.correct && userAns !== q.correct){
    document.getElementById('feedback').textContent = 'Oops üòÖ Try again!';
    return;
  }

  step++;
  if(step < questions.length) loadQuestion();
  else showSection('gifts');
}

/* -----------------------------
   Gifts (order enforced)
   ----------------------------- */
function openGift(n){
  const msg = document.getElementById('giftMessage');
  if(n !== expectedGift){
    msg.innerText = 'Please click the boxes in order: 1 ‚Üí 2 ‚Üí 3 ‚ù§Ô∏è';
    return;
  }
  const g = document.getElementById('gift'+n);
  // small fade-out + remove
  g.style.transition = 'opacity .4s, transform .4s';
  g.style.opacity = '0';
  g.style.transform = 'scale(.6) translateY(10px)';
  setTimeout(()=> g.remove(), 420);

  if(n === 1) msg.innerText = 'üòÇ Your boyfriend‚Äôs bank balance is less than ‚Çπ100! So, No Gift Here';
  else if(n === 2) msg.innerText = 'üíû Your boyfriend‚Äôs best gift for you is his love!';
  else showFinal();

  expectedGift++;
}

/* -----------------------------
   Final: photos + floating hearts
   ----------------------------- */
function showFinal(){
  showSection('final');
  const photoContainer = document.getElementById('photoContainer');
  photoContainer.innerHTML = '';
  const photos = ['photo1.jpg','photo2.jpg','photo3.jpg','photo4.jpg'];
  photos.forEach((src,i)=>{
    setTimeout(()=>{
      const img = document.createElement('img');
      img.src = src;
      img.className = 'photo-show';
      photoContainer.appendChild(img);
    }, i*750);
  });
  setTimeout(()=>{
    photoContainer.innerHTML = '<img src="finalphoto.jpg" class="photo-show" style="width:300px;height:300px;"><h2>üíñ Happy Anniversary, my Deveee üíñ</h2>';
  }, photos.length*750 + 900);

  // start hearts AFTER final section is visible (ensures they are visible)
  setTimeout(startFloatingHearts, 1100);
}

/* -----------------------------
   Floating hearts generator
   ----------------------------- */
let heartTimer = null;
function startFloatingHearts(){
  // ensure only one interval
  if(heartTimer) clearInterval(heartTimer);
  heartTimer = setInterval(()=>{
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.textContent = 'üíñ';
    // left between 6% and 92% so it doesn't overlap edges badly
    heart.style.left = (6 + Math.random()*86) + 'vw';
    // random duration 4.5s - 7s
    const dur = (4.5 + Math.random()*2.5);
    heart.style.animationDuration = dur + 's';
    document.body.appendChild(heart);
    // remove after animation completes
    setTimeout(()=> { heart.remove(); }, (dur*1000)+200);
  }, 420);
}

/* -----------------------------
   Autoplay fallback (if blocked)
   ----------------------------- */
document.addEventListener('DOMContentLoaded',()=>{
  const audio = document.getElementById('bg-music');
  // try to play - browsers may block but attempt
  audio.play().catch(()=> {
    // create a small unobtrusive overlay prompt to tap to enable
    const prompt = document.createElement('div');
    prompt.innerHTML = 'üîä Tap anywhere to enable music';
    Object.assign(prompt.style, {
      position: 'fixed', left: '50%', top: '12%', transform: 'translateX(-50%)',
      background: 'rgba(255,255,255,0.92)', padding: '8px 14px', borderRadius: '999px',
      zIndex: 99998, color: '#d63384', border: '1px solid #ff99cc', cursor: 'pointer'
    });
    document.body.appendChild(prompt);
    const enable = ()=> {
      audio.play().catch(()=>{}); // try again
      prompt.remove();
      document.removeEventListener('click', enable);
    };
    document.addEventListener('click', enable);
  });
});
</script>
</body>
</html>
